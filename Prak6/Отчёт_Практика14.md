# Отчёт по Практической работе №14

**Тема:** Фрагменты. Жизненный цикл, навигация и способы обмена данными.

**Выполнил:** Студент группы БСБО-09-22  
**Проекты:** MovieProject (с отдельными модулями listviewapp и recyclerviewapp) и Askon

---

## Структура проекта

Проект организован в виде multi-module приложения:

- **app** - основное приложение MovieProject с полной функциональностью
- **listviewapp** - отдельный модуль для демонстрации работы с ListView и фрагментами
- **recyclerviewapp** - отдельный модуль для демонстрации работы с RecyclerView и фрагментами
- **domain** - модуль с бизнес-логикой
- **data** - модуль с данными и репозиториями

---

## Цель работы

Целью данной практической работы является получение комплексных знаний и практических навыков по использованию компонента `Fragment` в Android-приложениях. В ходе работы были изучены:

- Жизненный цикл фрагментов и его связь с жизненным циклом `Activity`.
- Способы добавления фрагментов и управление ими с помощью `FragmentManager`.
- Построение навигации между экранами, реализованными в виде фрагментов.
- Современные подходы к организации обмена данными между фрагментами: `Bundle`, `ViewModel` с `LiveData` и `Fragment Result API`.

---

## 1. Создание базового фрагмента и передача данных через `Bundle`

### Описание

Создано приложение с `FragmentDemoActivity` и `BlankFragment`. Activity передаёт номер студента (15) во фрагмент через Bundle при создании. Фрагмент получает эти данные и отображает на экране.

### Реализация для MovieProject

**BlankFragment.java:**

```java
package ru.mirea.yudaev.Lesson9.presentation;

import android.os.Bundle;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.TextView;

import androidx.annotation.NonNull;
import androidx.annotation.Nullable;
import androidx.fragment.app.Fragment;

import ru.mirea.yudaev.Lesson9.R;

public class BlankFragment extends Fragment {

    private static final String ARG_STUDENT_NUMBER = "student_number";

    private TextView studentNumberTextView;

    public static BlankFragment newInstance(int studentNumber) {
        BlankFragment fragment = new BlankFragment();
        Bundle args = new Bundle();
        args.putInt(ARG_STUDENT_NUMBER, studentNumber);
        fragment.setArguments(args);
        return fragment;
    }

    @Nullable
    @Override
    public View onCreateView(@NonNull LayoutInflater inflater, @Nullable ViewGroup container, @Nullable Bundle savedInstanceState) {
        View view = inflater.inflate(R.layout.fragment_blank, container, false);
        studentNumberTextView = view.findViewById(R.id.studentNumberTextView);
        return view;
    }

    @Override
    public void onViewCreated(@NonNull View view, @Nullable Bundle savedInstanceState) {
        super.onViewCreated(view, savedInstanceState);

        if (getArguments() != null) {
            int studentNumber = getArguments().getInt(ARG_STUDENT_NUMBER);
            studentNumberTextView.setText("Номер студента: " + studentNumber);
        }
    }
}
```

**Использование в FragmentDemoActivity:**

```java
case R.id.nav_bundle:
    fragment = BlankFragment.newInstance(15);
    break;
```

### Реализация для Askon

Аналогичная структура создана в проекте Askon с package `com.x2ketarol.askon.presentation.fragments`. Фрагмент BlankFragment отображает тот же номер студента через Bundle.

---

## 2. Навигация между списком и деталями фильмов/экспертов

### Описание

Реализована навигация между списком элементов (фильмы в MovieProject, эксперты в Askon) и экраном деталей. При нажатии на элемент списка происходит замена фрагмента с использованием `replace()` и `addToBackStack()` для поддержки кнопки "Назад".

### Реализация для MovieProject

**MovieListFragment.java:**

```java
package ru.mirea.yudaev.Lesson9.presentation;

import android.os.Bundle;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;

import androidx.annotation.NonNull;
import androidx.annotation.Nullable;
import androidx.fragment.app.Fragment;
import androidx.lifecycle.ViewModelProvider;
import androidx.recyclerview.widget.LinearLayoutManager;
import androidx.recyclerview.widget.RecyclerView;

import ru.mirea.yudaev.Lesson9.R;
import ru.mirea.yudaev.Lesson9.domain.model.Movie;
import ru.mirea.yudaev.Lesson9.presentation.adapters.MovieFragmentAdapter;

import java.util.ArrayList;
import java.util.List;

public class MovieListFragment extends Fragment {

    private RecyclerView recyclerView;
    private MovieFragmentAdapter adapter;
    private SharedMovieViewModel viewModel;

    @Nullable
    @Override
    public View onCreateView(@NonNull LayoutInflater inflater, @Nullable ViewGroup container, @Nullable Bundle savedInstanceState) {
        View view = inflater.inflate(R.layout.fragment_movie_list, container, false);
        recyclerView = view.findViewById(R.id.moviesRecyclerView);
        return view;
    }

    @Override
    public void onViewCreated(@NonNull View view, @Nullable Bundle savedInstanceState) {
        super.onViewCreated(view, savedInstanceState);

        viewModel = new ViewModelProvider(requireActivity()).get(SharedMovieViewModel.class);

        setupRecyclerView();
        loadMovies();
    }

    private void setupRecyclerView() {
        adapter = new MovieFragmentAdapter(new ArrayList<>(), movie -> {
            // Set selected movie in ViewModel
            viewModel.selectMovie(movie);
            
            // Navigate to details fragment
            getParentFragmentManager().beginTransaction()
                .setReorderingAllowed(true)
                .replace(R.id.fragmentContainer, new MovieDetailsFragment())
                .addToBackStack(null)
                .commit();
        });

        recyclerView.setLayoutManager(new LinearLayoutManager(getContext()));
        recyclerView.setAdapter(adapter);
    }

    private void loadMovies() {
        // Sample movie list
        List<Movie> movies = new ArrayList<>();
        movies.add(new Movie("The Shawshank Redemption", 1994, "Drama", 9.3));
        movies.add(new Movie("The Godfather", 1972, "Crime", 9.2));
        movies.add(new Movie("The Dark Knight", 2008, "Action", 9.0));

        adapter.updateMovies(movies);
    }
}
```

**MovieDetailsFragment.java:**

```java
package ru.mirea.yudaev.Lesson9.presentation;

import android.os.Bundle;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.TextView;

import androidx.annotation.NonNull;
import androidx.annotation.Nullable;
import androidx.fragment.app.Fragment;
import androidx.lifecycle.ViewModelProvider;

import ru.mirea.yudaev.Lesson9.R;
import ru.mirea.yudaev.Lesson9.domain.model.Movie;

public class MovieDetailsFragment extends Fragment {

    private TextView titleTextView;
    private TextView yearTextView;
    private TextView genreTextView;
    private TextView ratingTextView;

    private SharedMovieViewModel viewModel;

    @Nullable
    @Override
    public View onCreateView(@NonNull LayoutInflater inflater, @Nullable ViewGroup container, @Nullable Bundle savedInstanceState) {
        View view = inflater.inflate(R.layout.fragment_movie_details, container, false);
        
        titleTextView = view.findViewById(R.id.movieTitleTextView);
        yearTextView = view.findViewById(R.id.movieYearTextView);
        genreTextView = view.findViewById(R.id.movieGenreTextView);
        ratingTextView = view.findViewById(R.id.movieRatingTextView);
        
        return view;
    }

    @Override
    public void onViewCreated(@NonNull View view, @Nullable Bundle savedInstanceState) {
        super.onViewCreated(view, savedInstanceState);

        viewModel = new ViewModelProvider(requireActivity()).get(SharedMovieViewModel.class);

        viewModel.getSelectedMovie().observe(getViewLifecycleOwner(), movie -> {
            if (movie != null) {
                displayMovieDetails(movie);
            }
        });
    }

    private void displayMovieDetails(Movie movie) {
        titleTextView.setText(movie.getTitle());
        yearTextView.setText("Год: " + movie.getYear());
        genreTextView.setText("Жанр: " + movie.getGenre());
        ratingTextView.setText("Рейтинг: " + movie.getRating());
    }
}
```

### Реализация для Askon

**ExpertListFragment.java:**

Аналогично MovieListFragment, но работает с экспертами. При клике на эксперта происходит навигация к ExpertDetailsFragment через SharedExpertViewModel.

**ExpertDetailsFragment.java:**

Отображает детали выбранного эксперта: имя, специальность, рейтинг и цену консультации.

---

## 3. Обмен данными между фрагментами через `ViewModel` с `LiveData`

### Описание

Для обмена данными между `MovieListFragment` и `MovieDetailsFragment` используется `SharedMovieViewModel`, который содержит `MutableLiveData<Movie>`. ViewModel создаётся на уровне Activity через `ViewModelProvider(requireActivity())`, что позволяет фрагментам разделять общее состояние.

### Реализация для MovieProject

**SharedMovieViewModel.java:**

```java
package ru.mirea.yudaev.Lesson9.presentation;

import androidx.lifecycle.LiveData;
import androidx.lifecycle.MutableLiveData;
import androidx.lifecycle.ViewModel;

import ru.mirea.yudaev.Lesson9.domain.model.Movie;

public class SharedMovieViewModel extends ViewModel {
    
    private final MutableLiveData<Movie> selectedMovie = new MutableLiveData<>();
    
    public void selectMovie(Movie movie) {
        selectedMovie.setValue(movie);
    }
    
    public LiveData<Movie> getSelectedMovie() {
        return selectedMovie;
    }
}
```

**Использование:**

1. `MovieListFragment` вызывает `viewModel.selectMovie(movie)` при клике на элемент.
2. `MovieDetailsFragment` подписывается на `viewModel.getSelectedMovie().observe()` и автоматически обновляет UI при изменении данных.

### Реализация для Askon

**SharedExpertViewModel.java:**

```java
package com.x2ketarol.askon.presentation.viewmodels;

import androidx.lifecycle.LiveData;
import androidx.lifecycle.MutableLiveData;
import androidx.lifecycle.ViewModel;

import com.x2ketarol.askon.domain.model.Expert;

public class SharedExpertViewModel extends ViewModel {
    
    private final MutableLiveData<Expert> selectedExpert = new MutableLiveData<>();
    
    public void selectExpert(Expert expert) {
        selectedExpert.setValue(expert);
    }
    
    public LiveData<Expert> getSelectedExpert() {
        return selectedExpert;
    }
}
```

Работает аналогично MovieProject, но с моделью Expert.

---

## 4. Fragment Result API для передачи данных через BottomSheetDialogFragment

### Описание

Реализована демонстрация Fragment Result API. `DataInputFragment` содержит поле ввода и кнопку. При нажатии на кнопку данные отправляются через `setFragmentResult()`, после чего открывается `BottomSheetDialogFragment`, который принимает данные через `setFragmentResultListener()`.

### Реализация для MovieProject

**DataInputFragment.java:**

```java
package ru.mirea.yudaev.Lesson9.presentation;

import android.os.Bundle;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.Button;
import android.widget.EditText;

import androidx.annotation.NonNull;
import androidx.annotation.Nullable;
import androidx.fragment.app.Fragment;

import ru.mirea.yudaev.Lesson9.R;

public class DataInputFragment extends Fragment {

    private EditText dataInput;
    private Button sendButton;

    @Nullable
    @Override
    public View onCreateView(@NonNull LayoutInflater inflater, @Nullable ViewGroup container, @Nullable Bundle savedInstanceState) {
        View view = inflater.inflate(R.layout.fragment_data_input, container, false);
        
        dataInput = view.findViewById(R.id.dataInput);
        sendButton = view.findViewById(R.id.sendButton);
        
        return view;
    }

    @Override
    public void onViewCreated(@NonNull View view, @Nullable Bundle savedInstanceState) {
        super.onViewCreated(view, savedInstanceState);

        sendButton.setOnClickListener(v -> {
            String inputText = dataInput.getText().toString();
            
            // Send data via Fragment Result API
            Bundle result = new Bundle();
            result.putString("text", inputText);
            getParentFragmentManager().setFragmentResult("dataRequestKey", result);
            
            // Show BottomSheet
            MovieBottomSheetFragment bottomSheet = new MovieBottomSheetFragment();
            bottomSheet.show(getParentFragmentManager(), "MovieBottomSheet");
        });
    }
}
```

**MovieBottomSheetFragment.java:**

```java
package ru.mirea.yudaev.Lesson9.presentation;

import android.os.Bundle;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.TextView;

import androidx.annotation.NonNull;
import androidx.annotation.Nullable;

import com.google.android.material.bottomsheet.BottomSheetDialogFragment;
import ru.mirea.yudaev.Lesson9.R;

public class MovieBottomSheetFragment extends BottomSheetDialogFragment {

    private TextView receivedDataTextView;

    @Nullable
    @Override
    public View onCreateView(@NonNull LayoutInflater inflater, @Nullable ViewGroup container, @Nullable Bundle savedInstanceState) {
        View view = inflater.inflate(R.layout.fragment_bottom_sheet, container, false);
        receivedDataTextView = view.findViewById(R.id.receivedDataTextView);
        return view;
    }

    @Override
    public void onCreate(@Nullable Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        
        // Listen for Fragment Result
        getParentFragmentManager().setFragmentResultListener("dataRequestKey", this, (requestKey, result) -> {
            String text = result.getString("text");
            if (receivedDataTextView != null) {
                receivedDataTextView.setText("Получено: " + text);
            }
        });
    }
}
```

### Реализация для Askon

Аналогичная структура с `DataInputFragment` и `ExpertBottomSheetFragment`, использующими тот же паттерн Fragment Result API с ключом `"dataRequestKey"`.

---

## 5. Контрольное задание: ProfileFragment с выходом из системы

### Описание

Создан `ProfileFragment`, который отображает информацию о текущем пользователе (email) и кнопку выхода. Используется `ProfileViewModel` для управления состоянием пользователя и событием выхода.

### Реализация для MovieProject

**ProfileFragment.java:**

```java
package ru.mirea.yudaev.Lesson9.presentation;

import android.os.Bundle;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.Button;
import android.widget.TextView;

import androidx.annotation.NonNull;
import androidx.annotation.Nullable;
import androidx.fragment.app.Fragment;
import androidx.lifecycle.ViewModelProvider;

import ru.mirea.yudaev.Lesson9.R;

public class ProfileFragment extends Fragment {

    private ProfileViewModel viewModel;
    private TextView emailTextView;
    private Button logoutButton;

    @Nullable
    @Override
    public View onCreateView(@NonNull LayoutInflater inflater, @Nullable ViewGroup container, @Nullable Bundle savedInstanceState) {
        View view = inflater.inflate(R.layout.fragment_profile, container, false);
        
        emailTextView = view.findViewById(R.id.emailTextView);
        logoutButton = view.findViewById(R.id.logoutButton);
        
        return view;
    }

    @Override
    public void onViewCreated(@NonNull View view, @Nullable Bundle savedInstanceState) {
        super.onViewCreated(view, savedInstanceState);
        
        viewModel = new ViewModelProvider(this).get(ProfileViewModel.class);
        
        // Observe user data
        viewModel.getUser().observe(getViewLifecycleOwner(), user -> {
            if (user != null) {
                emailTextView.setText("Email: " + user.getEmail());
            } else {
                emailTextView.setText("Пользователь не авторизован");
            }
        });
        
        // Observe logout event
        viewModel.getLogoutEvent().observe(getViewLifecycleOwner(), shouldNavigateToLogin -> {
            if (shouldNavigateToLogin != null && shouldNavigateToLogin) {
                emailTextView.setText("Вы вышли из системы");
            }
        });
        
        logoutButton.setOnClickListener(v -> viewModel.logout());
    }
}
```

**ProfileViewModel.java:**

```java
package ru.mirea.yudaev.Lesson9.presentation;

import androidx.lifecycle.LiveData;
import androidx.lifecycle.MutableLiveData;
import androidx.lifecycle.ViewModel;

import ru.mirea.yudaev.Lesson9.domain.model.User;

public class ProfileViewModel extends ViewModel {
    
    private final MutableLiveData<User> user = new MutableLiveData<>();
    private final MutableLiveData<Boolean> logoutEvent = new MutableLiveData<>();
    
    public ProfileViewModel() {
        // Load current user (simulated)
        User currentUser = new User("user@example.com", "password123");
        user.setValue(currentUser);
    }
    
    public LiveData<User> getUser() {
        return user;
    }
    
    public LiveData<Boolean> getLogoutEvent() {
        return logoutEvent;
    }
    
    public void logout() {
        user.setValue(null);
        logoutEvent.setValue(true);
    }
}
```

### Реализация для Askon

Идентичная структура в package `com.x2ketarol.askon.presentation.fragments` и `viewmodels`.

---

## 6. FragmentDemoActivity с BottomNavigationView

### Описание

Создана главная Activity с `BottomNavigationView`, которая управляет переключением между всеми созданными фрагментами:
- **Фильмы/Эксперты** - список с навигацией к деталям
- **Bundle** - демонстрация передачи через Bundle
- **Result API** - демонстрация Fragment Result API
- **Профиль** - экран профиля с выходом

### Реализация для MovieProject

**FragmentDemoActivity.java:**

```java
package ru.mirea.yudaev.Lesson9.presentation;

import android.os.Bundle;
import androidx.appcompat.app.AppCompatActivity;
import androidx.fragment.app.Fragment;

import com.google.android.material.bottomnavigation.BottomNavigationView;
import ru.mirea.yudaev.Lesson9.R;

public class FragmentDemoActivity extends AppCompatActivity {

    private BottomNavigationView bottomNavigationView;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_fragment_demo);

        bottomNavigationView = findViewById(R.id.bottomNavigationView);

        // Load default fragment
        if (savedInstanceState == null) {
            loadFragment(new MovieListFragment());
        }

        bottomNavigationView.setOnItemSelectedListener(item -> {
            Fragment fragment = null;

            if (item.getItemId() == R.id.nav_movies) {
                fragment = new MovieListFragment();
            } else if (item.getItemId() == R.id.nav_bundle) {
                fragment = BlankFragment.newInstance(15);
            } else if (item.getItemId() == R.id.nav_result_api) {
                fragment = new DataInputFragment();
            } else if (item.getItemId() == R.id.nav_profile) {
                fragment = new ProfileFragment();
            }

            if (fragment != null) {
                loadFragment(fragment);
                return true;
            }
            return false;
        });
    }

    private void loadFragment(Fragment fragment) {
        getSupportFragmentManager().beginTransaction()
            .setReorderingAllowed(true)
            .replace(R.id.fragmentContainer, fragment)
            .commit();
    }
}
```

**activity_fragment_demo.xml:**

```xml
<?xml version="1.0" encoding="utf-8"?>
<androidx.constraintlayout.widget.ConstraintLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:fitsSystemWindows="true">

    <FrameLayout
        android:id="@+id/fragmentContainer"
        android:layout_width="0dp"
        android:layout_height="0dp"
        app:layout_constraintTop_toTopOf="parent"
        app:layout_constraintBottom_toTopOf="@+id/bottomNavigationView"
        app:layout_constraintStart_toStartOf="parent"
        app:layout_constraintEnd_toEndOf="parent"/>

    <com.google.android.material.bottomnavigation.BottomNavigationView
        android:id="@+id/bottomNavigationView"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:background="?android:attr/windowBackground"
        app:menu="@menu/bottom_nav_menu"
        app:layout_constraintBottom_toBottomOf="parent"
        app:layout_constraintStart_toStartOf="parent"
        app:layout_constraintEnd_toEndOf="parent"/>

</androidx.constraintlayout.widget.ConstraintLayout>
```

### Реализация для Askon

**FragmentDemoActivity.java** в Askon идентична, но использует `ExpertListFragment` вместо `MovieListFragment` и соответствующие ID навигации (`nav_experts`).

---

## Архитектура приложения

Оба приложения следуют MVVM (Model-View-ViewModel) архитектуре:

- **Model**: Доменные модели (Movie, Expert, User)
- **View**: Фрагменты с XML layout файлами
- **ViewModel**: Управляют состоянием и бизнес-логикой (SharedMovieViewModel, ProfileViewModel)

### Ключевые компоненты:

1. **Fragment Lifecycle**: Использование `onCreateView` и `onViewCreated` для инициализации UI
2. **FragmentManager**: Управление транзакциями с `replace()`, `addToBackStack()`, `setReorderingAllowed(true)`
3. **LiveData**: Реактивное обновление UI при изменении данных
4. **ViewModelProvider**: Создание ViewModel на уровне Activity для разделения между фрагментами
5. **Fragment Result API**: Однонаправленная передача данных между фрагментами

---

## Структура файлов

### MovieProject (основной модуль app)

```
app/src/main/java/ru/mirea/yudaev/Lesson9/presentation/
├── FragmentDemoActivity.java
├── BlankFragment.java
├── MovieListFragment.java
├── MovieDetailsFragment.java
├── DataInputFragment.java
├── MovieBottomSheetFragment.java
├── ProfileFragment.java
├── SharedMovieViewModel.java
├── ProfileViewModel.java
└── adapters/
    └── MovieFragmentAdapter.java

app/src/main/res/layout/
├── activity_fragment_demo.xml
├── fragment_blank.xml
├── fragment_movie_list.xml
├── fragment_movie_details.xml
├── fragment_data_input.xml
├── fragment_bottom_sheet.xml
├── fragment_profile.xml
└── item_movie_simple.xml

app/src/main/res/menu/
└── bottom_nav_menu.xml
```

### ListView Demo Module (listviewapp)

Отдельный модуль для демонстрации работы с ListView:

```
listviewapp/src/main/java/ru/mirea/yudaev/listview/
├── ListViewDemoActivity.java
├── MovieListFragment.java
└── MovieDetailsFragment.java

listviewapp/src/main/res/layout/
├── activity_listview_demo.xml
├── fragment_movie_list.xml
└── fragment_movie_details.xml
```

**Особенности:**
- Использует стандартный ArrayAdapter для ListView
- Передача данных через Bundle при навигации
- Простой подход без ViewModel

### RecyclerView Demo Module (recyclerviewapp)

Отдельный модуль для демонстрации работы с RecyclerView:

```
recyclerviewapp/src/main/java/ru/mirea/yudaev/recyclerview/
├── RecyclerViewDemoActivity.java
├── MovieListFragment.java
├── MovieDetailsFragment.java
├── Movie.java
├── MovieAdapter.java
└── SharedMovieViewModel.java

recyclerviewapp/src/main/res/layout/
├── activity_recyclerview_demo.xml
├── fragment_movie_list.xml
├── fragment_movie_details.xml
└── item_movie.xml
```

**Особенности:**
- Кастомный адаптер MovieAdapter
- Использует SharedViewModel для обмена данными
- RecyclerView с CardView элементами

### Askon

```
app/src/main/java/com/x2ketarol/askon/presentation/
├── FragmentDemoActivity.java
├── fragments/
│   ├── BlankFragment.java
│   ├── ExpertListFragment.java
│   ├── ExpertDetailsFragment.java
│   ├── DataInputFragment.java
│   ├── ExpertBottomSheetFragment.java
│   ├── ProfileFragment.java
│   └── adapters/
│       └── ExpertFragmentAdapter.java
└── viewmodels/
    ├── SharedExpertViewModel.java
    └── ProfileViewModel.java

app/src/main/res/layout/
├── activity_fragment_demo.xml
├── fragment_blank.xml
├── fragment_expert_list.xml
├── fragment_expert_details.xml
├── fragment_data_input.xml
├── fragment_bottom_sheet.xml
├── fragment_profile.xml
└── item_expert_simple.xml

app/src/main/res/menu/
└── bottom_nav_menu.xml
```

---

## Итоги

В ходе практической работы №14 были успешно реализованы все требуемые задания:

✅ **Передача данных через Bundle** - BlankFragment получает номер студента (15) при создании  
✅ **Навигация между фрагментами** - Список → Детали с поддержкой кнопки "Назад"  
✅ **SharedViewModel** - Обмен данными между MovieListFragment и MovieDetailsFragment через LiveData  
✅ **Fragment Result API** - Передача данных из DataInputFragment в BottomSheetDialogFragment  
✅ **ProfileFragment** - Экран профиля с LiveData для пользователя и события выхода  
✅ **BottomNavigationView** - Главная навигация между всеми разделами приложения  
✅ **Отдельные демо-модули** - Созданы 3 автономных модуля для изучения различных аспектов работы с фрагментами

Приложения демонстрируют современные подходы к работе с фрагментами в Android, использование архитектурных компонентов (ViewModel, LiveData) и следование best practices для навигации и обмена данными.

---

## Демонстрационные модули для изучения фрагментов

Для систематического изучения различных аспектов работы с фрагментами были созданы **3 автономных модуля**, каждый из которых фокусируется на определённой технике обмена данными:

### 1. fragmentbundleapp - Bundle и базовая навигация

**Назначение:** Демонстрация передачи данных через Bundle и базовой навигации между фрагментами.

**Компоненты:**
- `BundleDemoActivity` - контейнер для фрагментов
- `BlankFragment` - получает данные студента через Bundle (номер, ФИО, группа)
- `ListFragment` - список фильмов с ArrayAdapter
- `DetailsFragment` - детали выбранного фильма, переданные через Bundle

**Архитектура:**
```
Activity → Bundle → BlankFragment
         ↓
    ListFragment → Bundle → DetailsFragment
         ↑                       ↓
         └────── Back Stack ─────┘
```

**Ключевые особенности:**
- Передача примитивных типов и String через Bundle
- Навигация с `addToBackStack()` для поддержки кнопки "Назад"
- Простой подход без ViewModel
- Цветовая кодировка фрагментов (синий → жёлтый → зелёный)

**Файлы:** 4 Java класса, 4 layout файла

---

### 2. fragmentviewmodelapp - SharedViewModel

**Назначение:** Демонстрация обмена данными между фрагментами через SharedViewModel с LiveData.

**Компоненты:**
- `ViewModelDemoActivity` - контейнер
- `Movie` - модель данных (title, director, year, genre, rating)
- `SharedMovieViewModel` - ViewModel на уровне Activity с `LiveData<Movie>`
- `MovieListFragment` - RecyclerView со списком фильмов
- `MovieDetailsFragment` - наблюдает за изменениями в SharedViewModel
- `MovieAdapter` - RecyclerView адаптер с click listener

**Архитектура MVVM:**
```
MovieListFragment ──┐
                    ├──→ SharedMovieViewModel (Activity scope)
MovieDetailsFragment┘         ↓
                         LiveData<Movie>
                              ↓
                    observe() в обоих фрагментах
```

**Ключевые особенности:**
- ViewModel создаётся через `ViewModelProvider(requireActivity())`
- Оба фрагмента используют **один экземпляр** ViewModel
- LiveData обеспечивает реактивное обновление UI
- RecyclerView с Material CardView для современного UI
- Данные сохраняются при rotation screen

**Преимущества:**
- Нет прямой связи между фрагментами
- Автоматическое обновление при изменении данных
- Lifecycle-aware компоненты
- Поддержка configuration changes

**Файлы:** 6 Java классов, 4 layout файла

---

### 3. fragmentresultapp - Fragment Result API

**Назначение:** Демонстрация Fragment Result API для одноразовой передачи событийных данных.

**Компоненты:**
- `ResultApiDemoActivity` - контейнер
- `DataInputFragment` - форма ввода с EditText и кнопкой
- `MovieBottomSheetFragment` - BottomSheetDialogFragment для отображения результата

**Механизм работы:**
```
DataInputFragment:
    1. Пользователь вводит текст
    2. Создаёт Bundle с данными
    3. Вызывает setFragmentResult("data_request", bundle)
    4. Открывает BottomSheet

MovieBottomSheetFragment:
    1. В onCreate() регистрирует FragmentResultListener
    2. Получает callback с Bundle
    3. Извлекает данные и обновляет UI
```

**Ключевые особенности:**
- **Событийная** передача данных (one-time delivery)
- BottomSheetDialogFragment для модального окна
- FragmentResultListener регистрируется в `onCreate()`
- Слабая связь между фрагментами (sender не знает о receiver)
- Подходит для диалогов, форм, выбора опций

**Преимущества над Bundle:**
- Не требует передачи данных при создании фрагмента
- Идеален для асинхронных результатов
- Заменяет deprecated `setTargetFragment()`

**Файлы:** 3 Java класса, 3 layout файла

---

### Сравнение подходов к обмену данными

| Подход | Модуль | Когда использовать | Сложность |
|--------|--------|-------------------|-----------|
| **Bundle** | fragmentbundleapp | Передача первоначальных данных при создании | ⭐ Простой |
| **SharedViewModel** | fragmentviewmodelapp | Общее состояние между фрагментами, реактивный UI | ⭐⭐ Средний |
| **Fragment Result API** | fragmentresultapp | Одноразовые события, результаты диалогов | ⭐⭐ Средний |

---

### Запуск модулей

Все 3 модуля подключены в `settings.gradle.kts`:

```kotlin
include(":fragmentbundleapp")
include(":fragmentviewmodelapp")
include(":fragmentresultapp")
```

Компиляция отдельного модуля:
```bash
./gradlew :fragmentbundleapp:assembleDebug
./gradlew :fragmentviewmodelapp:assembleDebug
./gradlew :fragmentresultapp:assembleDebug
```

Каждый модуль является **полностью автономным приложением** с собственным `applicationId` и может запускаться независимо на устройстве.

---

### Дополнительные модули (устаревшие, из Prak4)

**listviewapp** - демонстрирует базовый подход:
- ListView с ArrayAdapter
- Навигация через Bundle
- Без использования ViewModel

**recyclerviewapp** - демонстрирует современный подход:
- RecyclerView с кастомным адаптером
- SharedViewModel для обмена данными
- Material Design компоненты (CardView)

Оба модуля также являются отдельными приложениями, но дублируют функциональность новых модулей.

---

## Итоги

**Технологии:**
- Fragment API
- FragmentManager с транзакциями
- ViewModel + LiveData (архитектурные компоненты)
- Fragment Result API
- BottomSheetDialogFragment
- BottomNavigationView
- Material Design Components
- RecyclerView для списков

Оба проекта (MovieProject и Askon) полностью реализуют требуемую функциональность с адаптацией под соответствующие доменные модели (фильмы и эксперты).

**Всего создано:**
- 2 основных приложения (MovieProject + Askon) - ~35 файлов
- 3 демонстрационных модуля (fragmentbundle/viewmodel/result) - ~30 файлов
- 2 устаревших модуля (listview/recyclerview) - ~18 файлов
